<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'/>
<script src='doc/common/blocks_utils.js'></script>
<link rel="stylesheet" type="text/css" href="doc/common/style.css">
<script src='doc/en-GB/footer.js'></script>
</head>
<body>
<h3 id="up">Receive a bluetooth telegram</h3>
<h4>Instruction</h4>
<div id='blocklyInstruction'></div>
<script>injectInstruction('dyor_bluetooth_recv_telegram','blocklyInstruction');</script>
<h4>Description</h4>
<p>Receives bluetooth telegrams from an external application. It executes a set of instructions according to the received telegram. A telegram involves a bluetooth data transmission protocol as specified. Use in conjunction with instruction:</p>
<div id='blocklyInstruction1'></div>
<script>injectInstruction('dyor_bluetooth_def','blocklyInstruction1');</script>
<h4>Requirements</h4>
<p>Facilino 's License</p>
<h5>Previous Versions</h5>
In previous versions of Facilino, this instruction TX and RX pins were configurable. This option has been removed to simplify the aspect of the instruction. You must make sure that you use the bluetooth module definition instruction for correct operation.
<h4>Mutator</h4>
Drag and drop telegrams to be decoded in the container:
<h5>Container</h5>
<div id='blocklyInstruction2'></div>
<script>injectInstruction('dyor_bluetooth_app_app','blocklyInstruction2');</script>
<h5>Elements</h5>
<div id='blocklyInstruction3'></div>
<script>injectInstruction('dyor_bluetooth_telegram_item','blocklyInstruction3');</script>
<h4>Inputs</h4>
<ul>
   <li>Telegram: Type of telegram to receive.</li>
</ul>
<h4>Statement Instructions</h4>
<ul>
  <li>Do: Set of instructions to execute in case of receiving the telegram.</li>
</ul>
<h5>Structure telegram</h5>
<div class="datagrid"><table>
<thead><tr><th>STX</th><th>CMD</th><th>Length</th><th>Data 0</th><th>...</th><th>Data N-1</th><th>END</th></tr></thead>
</table></div>
<p>STX being the '@' symbol in ASCII; CMD command (1 byte); Length the length of the data; Data 0 ... Data N-1 data and END the '*' symbol in ASCII.</p>
<h5>Predefined Telegrams</h5>
<div class="datagrid"><table>
<thead><tr><th>Command</th><th>Length</th><th>Data 0</th><th>Data 1</th><th>Data 2</th><th>Data 3 to Data 10</th></tr></thead>
<tbody><tr class="title"><td>Digital Output</td><td>2</td><td>Pin</td><td>Value</td><td>-</td><td>-</td></tr>
	<tr><td>Analog Output</td><td>2</td><td>Pin</td><td>Value</td><td>-</td><td>-</td></tr>
	<tr class="title"><td>Servo</td><td>2</td><td>Pin</td><td>Angle</td><td>-</td><td>-</td></tr>
	<tr><td>Servo 360º</td><td>2</td><td>Pin</td><td>Speed</td><td>-</td><td>-</td></tr>
	<tr class="title"><td>Audio</td><td>3</td><td>Pin</td><td>Frequency</td><td>               Duration</td><td>-</td></tr>
	<tr><td>LEDs matrix </td><td>4</td><td>Pin CS</td><td>DIN Pin</td><td>Pin CLK</td><td>Data (8 bytes)</td></tr>
</tbody>
</table></div>
<h4>Example</h4>
In this example, a telegram is received to remotely activate two leds connected to pins 5 and 6.
<div class="button_wrapper">
<p><button align="center" class="button" style="cursor: pointer;" onClick="openFunction('doc/examples/dyor_bluetooth_recv_telegram_example.bly')">Open</button></p>
All changes will be lost!
</div>
<h5>Circuit</h5>
<image src="doc/circuits/bluetooth_leds_example_bb.png" title="bluetooth_leds_example_bb" alt="bluetooth_leds_example_bb"></image>
<h5>Facilino Code</h5>
<div id='example1'></div>
<script>injectExample('dyor_bluetooth_recv_telegram_example.bly','example1');</script>
<p id='footer'></p><script>document.getElementById('footer').innerHTML=footer;</script>
</body>
</html>