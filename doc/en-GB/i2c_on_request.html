<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'/>
<script src='doc/common/blocks_utils.js'></script>
<link rel="stylesheet" type="text/css" href="doc/common/style.css">
<script src='doc/en-GB/footer.js'></script>
</head>
<body>
<h3 id="up">Send On Request I2C</h3>
<h4>Instruction</h4>
<div id='blocklyInstruction'></div>
<script>injectInstruction('i2c_on_request','blocklyInstruction');</script>
<h4>Description</h4>
<p>This instruction is used by I2C Slave to send data on request (a I2C Master requests data at the indicated address). The instruction executes the code in the statement and returns back required data. Data must be a variable (either scalar or array) or a numeric constant. This instruction can only be used once per program (the last rendered instruction will be used in case of multiple copies of this instruction).</p>
<h4>Fields</h4>
<ul>
<li>Address: Address of I2C slave. Maximum address value is 127.</li>
</ul>
<h4>Statements</h4>
<ul>
<li>Do: Code to exectute.</li>
</ul>
<h4>Inputs</h4>
<ul>
<li>Send data: Data to send (must be a variable or a numeric constant).</li>
</ul>
<h4>Example</h4>
This example shows the capabilities of the I2C communication. It represents a distributed network of MCUs. One of them is the Master that requests infrared readings of two independent I2C slaves (addresses 20 and 21). Received data is scaled into a servo position value (upto 180º) and transmitted to a servo controller slave (address 10) which is in charge of moving the servos.
<p><small><b>Master Program</b></small></p>
<div class="button_wrapper">
<p><button align="center" class="button" style="cursor: pointer;" onClick="openFunction('doc/examples/demo_i2c_master.bly')">Open</button></p>
All changes will be lost!
</div>
<p><small><b>Slave 10 Program</b></small></p>
<div class="button_wrapper">
<p><button align="center" class="button" style="cursor: pointer;" onClick="openFunction('doc/examples/demo_i2c_slave_10.bly')">Open</button></p>
All changes will be lost!
</div>
<p><small><b>Slave 20 Program</b></small></p>
<div class="button_wrapper">
<p><button align="center" class="button" style="cursor: pointer;" onClick="openFunction('doc/examples/demo_i2c_slave_20.bly')">Open</button></p>
All changes will be lost!
</div>
<p><small><b>Slave 21 Program</b></small></p>
<div class="button_wrapper">
<p><button align="center" class="button" style="cursor: pointer;" onClick="openFunction('doc/examples/demo_i2c_slave_21.bly')">Open</button></p>
All changes will be lost!
</div>
<h5>Circuit</h5>
<image src="doc/circuits/example_i2c_bb.png" title="example_i2c_bb" alt="example_i2c_bb"></image>
<h5>Facilino Code</h5>
<p><small><b>Master Program</b></small></p>
<div id='example1'></div>
<script>injectExample('demo_i2c_master.bly','example1');</script>
<p><small><b>Slave 10 Program</b></small></p>
<div id='example2'></div>
<script>injectExample('demo_i2c_slave_10.bly','example2');</script>
<p><small><b>Slave 20 Program</b></small></p>
<div id='example3'></div>
<script>injectExample('demo_i2c_slave_20.bly','example3');</script>
<p><small><b>Slave 21 Program</b></small></p>
<div id='example4'></div>
<script>injectExample('demo_i2c_slave_21.bly','example4');</script>
<p id='footer'></p><script>document.getElementById('footer').innerHTML=footer;</script>
</body>
</html>